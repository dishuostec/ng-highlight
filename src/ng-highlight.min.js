angular.module("ng-highlight",[]).directive("ngHighlight",function(){var a=function(b,c,e,f){if(3===b.nodeType){var g=b.data.match(c);if(g){var h=document.createElement(e||"span");h.className=f||"wrapper";var i=b.splitText(g.index);i.splitText(g[0].length);var j=i.cloneNode(!0);return h.appendChild(j),i.parentNode.replaceChild(h,i),d++,1}}else if(1===b.nodeType&&b.childNodes&&!/(script|style)/i.test(b.tagName)&&(b.tagName!==e.toUpperCase()||b.className!==f))for(var k=0;k<b.childNodes.length;k++)k+=a(b.childNodes[k],c,e,f);return 0},b=function(b,c,e){if(d=0,void 0!==b&&0!==b.length){b=b.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");var f=e.caseSensitive?"":"i",g="("+b+")";e.wholeWord&&(g="\\b"+g+"\\b");var h=new RegExp(g,f);a(c,h,e.element,e.className)}},c=function(a,b){angular.forEach(a.find(b.element),function(a){if(a.className===b.className){var c=a.parentNode;c.replaceChild(a.firstChild,a),c.normalize()}})},d=0;return{replace:!1,restrict:"A",scope:{keyword:"&ngHighlight",callback:"=hlCallback"},link:function(a,e,f){var g={className:"highlight",element:"span",caseSensitive:!1,wholeWord:!1};void 0!==f.hlClass&&(g.className=f.hlClass),void 0!==f.hlElement&&(g.element=f.hlElement),void 0!==f.hlCaseSensitive&&(g.caseSensitive="false"===f.hlCaseSensitive?!1:!!f.hlCaseSensitive),void 0!==f.hlMatchWholeWord&&(g.wholeWord="false"===f.hlMatchWholeWord?!1:!!f.hlMatchWholeWord),a.$watch(a.keyword,function(f){void 0!==f&&(c(e,g),b(f,e[0],g),void 0!==a.callback&&a.callback(d))})}}});